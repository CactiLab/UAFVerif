free c:channel.
fun h(bitstring):bitstring.

event e(bitstring).
event e'(bitstring).
event C(bitstring).
event D(bitstring).

query x:bitstring;  putbegin event:C,putbegin event:D; event (e'(x)) ==> event(e(x)).

process 
	new s:bitstring;
	(
        event C(s);
		event e(s);
		out(c,h(s))
	) | (
		in(c,=h(s));
		event e'(h(s))
	)
